apiVersion: tailscale.com/v1alpha1
kind: Connector
metadata:
  name: &name ${LOCATION}-sr-connector
spec:
  proxyClass: common
  tags:
    - tag:k8s
    - tag:${LOCATION}
  hostname: *name
  exitNode: true
  subnetRouter:
    advertiseRoutes:
      # - "${LAN_CIDR}" # LAN
      - "${CLUSTER_SERVICE_CIDR}" # K8s Services
      # - "${CLUSTER_POD_CIDR}" # K8s Pods
      - "10.69.${SITE_ID}.0/24" # Tailscale
      - "10.69.69.0/24" # K8s Load Balancer
      - "10.69.10.0/24" # K8s Load Balancer
      - fd7a:115c:a1e0:b1a:0:${SITE_ID}::/96 # 4via6
---
apiVersion: tailscale.com/v1alpha1
kind: Connector
metadata:
  name: &name ${LOCATION}-github-connector
spec:
  proxyClass: common
  tags:
    - tag:k8s
    - tag:${LOCATION}
    - tag:github-connector
  hostname: *name
  appConnector: 
    routes:
      - 140.82.112.21/32
      - 140.82.112.22/32
      - 140.82.112.3/32
      - 140.82.112.5/32
      - 140.82.113.3/32
      - 140.82.113.5/32
      - 140.82.113.6/32
      - 140.82.114.22/32
      - 140.82.114.26/32  