apiVersion: operator.karmada.io/v1alpha1
kind: Karmada
metadata:
  name: karmada-${LOCATION}
spec:
  components:
    etcd:
      local:
        replicas: 3
    karmadaAPIServer:
      serviceType: ClusterIP
      certSANs:
        - keiretsu-karmada-${LOCATION}-apiserver.keiretsu.ts.net
        - keiretsu-karmada-${LOCATION}-apiserver-external.keiretsu.svc.cluster.local
        - keiretsu-karmada-${LOCATION}-apiserver-external.keiretsu
        - keiretsu-karmada-${LOCATION}-apiserver-external
        - keiretsu-karmada-${LOCATION}-apiserver
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    tailscale.com/tailnet-fqdn: keiretsu-karmada-robbinsdale-apiserver.keiretsu.ts.net
    tailscale.com/proxy-group: "prod"
  name: karmada-robbinsdale-apiserver-external
spec:
  externalName: placeholder   # any value - will be overwritten by operator
  type: ExternalName
  ports:
  - port: 5443
    protocol: TCP
    name: client
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    tailscale.com/tailnet-fqdn: keiretsu-karmada-ottawa-apiserver.keiretsu.ts.net
    tailscale.com/proxy-group: "prod"
  name: karmada-ottawa-apiserver-external
spec:
  externalName: placeholder   # any value - will be overwritten by operator
  type: ExternalName
  ports:
  - port: 5443
    protocol: TCP
    name: client