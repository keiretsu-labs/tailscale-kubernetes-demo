apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - https://github.com/kubevirt/kubevirt/releases/download/v1.4.0/kubevirt-operator.yaml
  - kubevirt.yaml
  - https://github.com/kubevirt/containerized-data-importer/releases/download/v1.61.0/cdi-operator.yaml
  - https://github.com/kubevirt/containerized-data-importer/releases/download/v1.61.0/cdi-cr.yaml
  # - cdi.yaml
  - vm.yaml
  - win11.yaml
  - datavolume.yaml
  - pvc.yaml
  - https://github.com/wavezhang/virtVNC/raw/master/k8s/virtvnc.yaml
patches:
  - target:
      kind: Deployment
      name: virtvnc
    patch: |-
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        name: virtvnc
        namespace: kubevirt
      spec:
        template:
          spec:
            nodeSelector: null
            tolerations:
              - key: "node-role.kubernetes.io/master"
                operator: "Equal"
                value: ""
                effect: "NoSchedule"