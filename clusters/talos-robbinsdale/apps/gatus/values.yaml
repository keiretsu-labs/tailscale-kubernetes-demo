image:
  tag: latest
envFrom:
  - secretRef:
      name: gatus
  - secretRef:
      name: gatus-pg-app
config:
  storage:
    type: postgres
    path: "${uri}"
  alerting:
    discord:
      webhook-url: "${discord-webhook-url}"
  endpoints:
    - name: ollama-mac-mini
      url: http://tailscale-mac-mini.ollama:11434
      interval: 60s
      client:
        timeout: 30s
      conditions:
        - "[STATUS] == 200"
    - name: Truenas
      url: http://truenas.local
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Raj portfolio is down"
          send-on-resolved: true
    - name: Portfolio - Raj Singh
      url: https://www.rajsingh.info
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Raj portfolio is down"
          send-on-resolved: true
    - name: Immich
      url: http://immich-server.immich:2283/api/server/ping
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Raj portfolio is down"
          send-on-resolved: true
    - name: Cloudflared Tunnel
      url: https://status.rajsingh.info
      client:
        dns-resolver: "tcp://1.1.1.1:53"
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Cloudflared Tunnel is down"
          send-on-resolved: true
    - name: Envoy Public
      url: https://gatus.rajsingh.info
      client:
        dns-resolver: "tcp://1.1.1.1:53"
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Envoy Public Gateway is down"
          send-on-resolved: true
    - name: Envoy Private
      url: https://gatus.rajsingh.info
      client:
        dns-resolver: "tcp://10.69.10.69:53"
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Envoy Private Gateway is down"
          send-on-resolved: true
    - name: Portfolio - Luke Houge
      url: https://www.lukehouge.com
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Luke portfolio is down"
          send-on-resolved: true
    - name: Jellyfin
      url: http://jellyfin.media:8096/health
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Jellyfin is down"
          send-on-resolved: true
    - name: Jellystat
      url: http://jellystat.media:3000
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Jellystat is down"
          send-on-resolved: true
    - name: Jellyseerr
      url: http://jellyseerr.media:5055
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Jellyseerr is down"
          send-on-resolved: true
    - name: PiHole Primary DNS
      url: "10.69.10.69"
      dns:
        query-name: "google.com"
        query-type: "A"
      conditions:
        # - "[BODY] == 93.184.215.14"
        - "[DNS_RCODE] == NOERROR"
      # alerts:
      #   - type: discord
      #     description: "PiHole Primary DNS is down"
      #     send-on-resolved: true
    - name: PiHole Secondary DNS
      url: "10.69.69.10"
      dns:
        query-name: "google.com"
        query-type: "A"
      conditions:
        # - "[BODY] == 93.184.215.14"
        - "[DNS_RCODE] == NOERROR"
      # alerts:
      #   - type: discord
      #     description: "PiHole Secondary DNS is down"
      #     send-on-resolved: true
    - name: Frigate
      url: https://frigate.lukehouge.com
      interval: 60s
      conditions:
        - "[STATUS] == 200"
      alerts:
        - type: discord
          description: "Frigate is down"
          send-on-resolved: true
