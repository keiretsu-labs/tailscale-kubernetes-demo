apiVersion: tailscale.com/v1alpha1
kind: Connector
metadata:
  name: k8s-${LOCATION}-exit-node
spec:
  proxyClass: prod
  tags:
    - tag:k8s
    - tag:${LOCATION}
  hostname: robbinsdale-exit-node
  exitNode: true
---
apiVersion: tailscale.com/v1alpha1
kind: Connector
metadata:
  name: k8s-${LOCATION}-subnet-router-lan
spec:
  proxyClass: prod
  tags:
    - tag:k8s
    - tag:${LOCATION}
  hostname: robbinsdale-subnet-router-lan
  subnetRouter:
    advertiseRoutes:
      - "${LAN_CIDR}" # LAN
---
apiVersion: tailscale.com/v1alpha1
kind: Connector
metadata:
  name: k8s-${LOCATION}-subnet-router-service
spec:
  proxyClass: prod
  tags:
    - tag:k8s
    - tag:${LOCATION}
  hostname: robbinsdale-subnet-router-service
  subnetRouter:
    advertiseRoutes:
      - "${CLUSTER_SERVICE_CIDR}" # K8s Services
---
apiVersion: tailscale.com/v1alpha1
kind: Connector
metadata:
  name: k8s-${LOCATION}-subnet-router-pod
spec:
  proxyClass: prod
  tags:
    - tag:k8s
    - tag:${LOCATION}
  hostname: robbinsdale-subnet-router-pod
  subnetRouter:
    advertiseRoutes:
      - "${CLUSTER_POD_CIDR}" # K8s Pods
---
apiVersion: tailscale.com/v1alpha1
kind: Connector
metadata:
  name: k8s-${LOCATION}-subnet-router-lb
spec:
  proxyClass: prod
  tags:
    - tag:k8s
    - tag:${LOCATION}
  hostname: robbinsdale-subnet-router-lb
  subnetRouter:
    advertiseRoutes:
      - "${CLUSTER_LOAD_BALANCER_CIDR}" # K8s Load Balancer
---
apiVersion: tailscale.com/v1alpha1
kind: Connector
metadata:
  name: k8s-${LOCATION}-subnet-router-4via6
spec:
  proxyClass: prod
  tags:
    - tag:k8s
    - tag:${LOCATION}
  hostname: robbinsdale-subnet-router-4via6
  subnetRouter:
    advertiseRoutes:
      - fd7a:115c:a1e0:b1a:0:${SITE_ID}::/96 # 4via6