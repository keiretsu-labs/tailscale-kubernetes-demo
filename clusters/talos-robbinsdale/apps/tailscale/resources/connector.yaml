apiVersion: tailscale.com/v1alpha1
kind: Connector
metadata:
  name: &name k8s-${LOCATION}-entrypoint
spec:
  proxyClass: prod
  tags:
    - tag:k8s
    - tag:${LOCATION}
  hostname: *name
  exitNode: true
  subnetRouter:
    advertiseRoutes:
      - "${LAN_CIDR}" # LAN
      - "${CLUSTER_SERVICE_CIDR}" # K8s Services
      - "${CLUSTER_POD_CIDR}" # K8s Pods
      - "${CLUSTER_LOAD_BALANCER_CIDR}" # K8s Load Balancer
      - fd7a:115c:a1e0:b1a:0:${SITE_ID}::/96 # 4via6